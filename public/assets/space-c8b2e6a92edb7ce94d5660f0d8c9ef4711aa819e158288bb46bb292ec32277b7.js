(function(){var t=function(){var t,e,r,a=$(window),o=0,n=0,i=function(a,o){t=a,e=o,window.onscroll=function(){r||l()}},s=function(){if(r){var e=a.scrollTop();e==o&&++n>=30&&(n=0,f()),o=e,t()}},l=function(){r=window.setInterval(s,e)},f=function(){window.clearInterval(r),r=void 0};return Object.freeze({repeatOnScroll:i,getScrollTop:function(){return o}})},e=function(){function e(t,e){switch(t){case"scale":return"scale("+e+")";case"rotate":return"rotate("+e+"deg)";case"translate3d":return"translate3d("+(e.x?e.x+"px":0)+","+(e.y?e.y+"px":0)+","+(e.z?e.z+"px":0)+")";case"rotate3d":return"rotate3d("+(e.x?e.x:0)+","+(e.y?e.y:0)+","+(e.z?e.z:0)+","+(e.angle?e.angle+"deg":0)+")";default:return e}}var r,a=$(window),o=a.height(),n=t(),i=0,s={scaleIn:{scale:{from:0,to:1}},fadeIn:{opacity:{from:0,to:1}},scaleOut:{scale:{from:1,to:1.5}},fadeOut:{opacity:{from:1,to:0}},rotateQuarterRight:{rotate:{from:0,to:90}},rotateInQuarterClockwise:{rotate:{from:-90,to:0}},zoomOut:{scale:{from:1,to:0}},slideInBottom:{translate3d:{from:{y:700},to:{y:0}}},slideOutDown:{translate3d:{from:{y:0},to:{y:700}}},slideOutLeft:{translate3d:{from:{x:0},to:{x:-700}}},slideOutRight:{translate3d:{from:{x:0},to:{x:700}}},slideInRight:{translate3d:{from:{x:700},to:{x:0}}},slideOutUp:{translate3d:{from:{y:0},to:{y:-700}}},slideInTop:{translate3d:{from:{y:-700},to:{y:0}}},slideInLeft:{translate3d:{from:{x:-700},to:{x:0}}},slideBottomRight:{translate3d:{from:{x:0,y:0},to:{x:500,y:500}}},rotate360:{rotate:{from:0,to:360}},rotate3dOut:{rotate3d:{from:{x:0,y:0,z:0,angle:0},to:{x:1,y:-1,z:0,angle:90}}}},l={all:[s.scaleOut,s.fadeOut],enter:[],exit:[]},f=function(){var t=p()?.3:1,e=0;r=$(".space-frame").map(function(r,a){var n=(a.dataset.duration||1)*t,i=n*o,l=e;e+=i;var f="frame-"+r;a.id=f;var c=a.dataset.transition,d=a.dataset.enter,u=a.dataset.exit;if(c||d||u){var m={all:[],enter:[],exit:[]},x=function(t){return t.split(/\s+/).map(function(t){return s[t]})};return m.all=c?x(c):[],m.enter=d?x(d):[],m.exit=u?x(u):[],{selector:"#"+f,duration:i,distanceTo:l,transition:m}}return{selector:"#"+f,duration:i,distanceTo:l}}),$("body").height(e),$(r[i].selector).show(),n.repeatOnScroll(c,1e3/60)},c=function(){window.requestAnimationFrame(function(){d(),u()})},d=function(){var t=n.getScrollTop(),e=r[i].distanceTo;e>t?($(".space-frame").hide(),i--,0>i&&(i=0),$(r[i].selector).show()):t>e+r[i].duration&&($(".space-frame").hide(),i++,$(r[i].selector).show())},u=function(){var t=n.getScrollTop()-r[i].distanceTo,a={transform:""},o=r[i].transition||l;o.all.forEach(function(r){for(var o in r)"scale"==o||"translate3d"==o||"rotate"==o||"rotate3d"==o?a.transform+=e(o,m(r,t,o)):a[o]=e(o,m(r,t,o))}),t<=r[i].duration/2?o.enter.forEach(function(r){for(var o in r)"scale"==o||"translate3d"==o||"rotate"==o||"rotate3d"==o?a.transform+=e(o,m(r,2*t,o)):a[o]=e(o,m(r,2*t,o))}):o.exit.forEach(function(o){for(var n in o)"scale"==n||"translate3d"==n||"rotate"==n||"rotate3d"==n?a.transform+=e(n,m(o,2*(t-r[i].duration/2),n)):a[n]=e(n,m(o,2*(t-r[i].duration/2),n))}),a["-webkit-transform"]=a.transform,a["-moz-transform"]=a.transform,$(r[i].selector).css(a)},m=function(t,e,a){var o=t[a],n=r[i].duration;if("translate3d"==a||"rotate3d"==a){var s={};for(axis in o.from)s[axis]=+x(e,o.from[axis],o.to[axis]-o.from[axis],n).toFixed(4);return s}return+x(e,o.from,o.to-o.from,n).toFixed(4)},x=function(t,e,r,a){return e+r*(t/a)},p=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},v=function(t){for(var e in t){if(s[e])return void console.log("Transition name already exists!!!");s[e]=t[e]}f()};return Object.freeze({init:f,addTransitions:v})},r=function(){var t=".space-frame {display: none;position: fixed;width: 100vw;height: 100vh;} ",e=".space-frame .space-inner-frame {position: absolute;transform-style: preserve-3d;top: 50%;left: 50%;-webkit-transform: translate(-50%, -50%);-moz-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);-o-transform: translate(-50%, -50%);transform: translate(-50%, -50%);}",r=document.createElement("style");r.type="text/css",r.innerHTML=t+e,document.getElementsByTagName("head")[0].appendChild(r)};r(),Space=e(),Space.init()}).call(this);